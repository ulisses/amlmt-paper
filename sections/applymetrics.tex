\section{Applying Metrics To UML Models}
%APLICAÇÃO DE MÉTRICAS A MODELOS UML}

As métricas para avaliação de  software estão bem mais desenvolvidas que as métricas para linguagens de modelação. É então interessante ter em conta o estudo já realizado sobre métricas para avaliação de código, como é o caso das CK Metrics, como ponto de partida para métricas de modelação.\\
As CK Metrics, umas das primeiras métricas para o modelo Orientado a Objectos (OO), foram propostas por Chidamber e  Kemerer \cite{Chidamber:1994:MSO:630808.631131}. O conjunto das CK Metrics consiste em seis métricas: Weighted Methods Per Class (WMC), Depth of Inheritance Tree (DIT), Number of Children (NOC), Coupling between Object Classes (CBO), Response For a Class (RFC), e Lack of Cohesion in Methods (LCOM). Estas métricas foram depois adaptadas para linguagens de modelação, tal como é mostrado em ~\cite{Power2}. De seguida, será explicado como são calculadas cada uma das métricas referidas.

\subsection{Métricas \textrm{CK}}
\textbf{Weighted methods per class} (WMC):
Esta métrica diz respeito à complexidade que cada método tem para cada classe. Assim, para se obter o valor desta métrica soma-se
as complexidades que cada método pertencente a uma classe tem. Se considerarmos a complexidade de cada método como medida unitária
então a métrica WMC para um classe é igual ao número de métodos definidos nessa classe, referimo-nos a isto como WMC1.
A métrica WMC1 para uma classe pode ser obtida pelo diagrama de classes de um modelo UML, identificando a classe e contando o número
de métodos que essa classe implementa. Aternativamente podemos considerar a complexidade de cada método como o McCabe Cyclomatic Complexity, que referimos
como WMCcc. Os diagramas de actividade, sequência e comunicação contêm informação relevante para o WMCcc, mas é igualmente
plausível que os diagramas de estado possam ser usados para calcular este valor para a classe como um todo.\\

\textbf{Depth of inheritance tree} (DIT):
Esta é uma medida de profundidade da classe relativamente à sua árvore de herança. Esta métrica define-se por ser igual à distância máxima
desde a classe até à sua super classe root na árvore de herança. Esta métrica pode ser calculada para uma classe fazendo a união de todos os diagramas
de classe num modelo \umlS e atravessando a hierarquia de herança desta classe.\\

\textbf{Number of children} (NOC): Esta métrica representa o número de decendentes imediatos de uma determinada classe. Esta métrica pode ser obtida ao juntar todos os diagramas de classes numa modelação \umlS e verificar todas as relações de herança da classe.\\

\textbf{Coupling between object classes}: Duas classes estão relacionadas se o método de uma classe usa uma variável de instância ou um método da outra classe. Uma estimativa desta métrica pode ser obtida a partir dos diagramas de classes, contando o número de classes relacionadas com a classe em questão e contando todos os tipos de referência dos atributos e todos os parâmetros dos métodos da classe. Para obter um valor mais fidedigno, pode ter em conta informação dada pelos diagramas comportamentais, de forma a obter mais informação sobre o uso das variáveis de instância e de métodos de invocação. O diagrama de sequência, por exemplo, oferece informação directa sobre interacções entre métodos de classes diferentes. \\

\textbf{Response for a class} (RFC) - esta métrica é a contagem do número de métodos que potencialmente poderão ser invocados por um objecto de uma dada classe. O número de métodos de uma classe pode ser obtido a partir de um diagrama de classes, mas o número de métodos de outras classes que são invocadas por cada um dos métodos da classe requer informação à cerca do comportamento dessa classe. Esta informação pode ser derivada a partir da inspecção de vários diagramas de comportamento (diagramas sequencias/diagramas de actividade), de modo a obter a identidade dos métodos invocados.\\


\textbf{Lack of cohesion in methods} (LCOM)- ou seja, falta de coesão entre métodos. Calcular esta métrica para uma dada classe envolve descobrir, para cada possível par de métodos, se os conjuntos de variáveis de instância acedidos por cada método têm uma interseção que não um conjunto vazio.
Para ser possível computar um valor para esta métrica, informação do modo de uso das variáveis de instância pelos métodos de uma classe é essencial. Esta informação não pode ser obtida através de um diagrama de classes. No entanto, o valor máximo para esta métrica pode ser computado usando o número de métodos na classe. Diagramas contendo essa informação sobre o uso das variáveis, por exemplo, os diagramas sequenciais podem ser usados para calcular esta métrica.\\

O conjunto de métricas aqui definidas são referidos em vários papers e sem sombra de dúvidas são as mais estudadas, e também as mais utilizadas para avaliar modelos \uml.\\
Estas focam-se mais nos diagramas de classes visto estes serem os que mais facilmente se relacionam com código e é preciso ter em consideração que como estas regras derivam 
directamente do paradigma Orientado-a-Objectos, é mais fácil aplicá-las aos diagramas de classes. Para além disso este tipo de diagramas do ponto de vista da implementação 
dão uma visão mais geral do sistema que modela.\\
Estas métricas em particular são detalhadas por McQuillan e Power em~\cite{Power}. Também existe o SDMetrics software\footnote{{\url{http://www.sdmetrics.com/}}} que avalia além destas, um conjunto
 mais extenso de métricas, que analisam outros diagramas além do de classes, como por exemplo os diagramas de estados e de actividades. \\ 
Como grande parte das métricas derivam de fórmulas matemáticas, no capítulo seguinte serão apresentadas algumas que são essenciais para o cálculo dos
valores das métricas apresentadas anteriormente.


--Junção da Sec.1 do artigo dos Pedros e Ulisses com Sec.3 do artigo do Ismael e Daniela.

    * Explicar que as métricas sobre UML derivam directamente do OO.

    * Falar em CK metrics e falar apenas nos tipos de CK metrics mais importantes.

    * Relacionar as tabelas do paper do Ismael e Daniela com os tipos de CK metrics.

